import{R as z,r as o,j as t,O as D,c as l,C as A,T as H,D as _,P as U,a as W,u as G,b as q,d as M,A as K,g as Q}from"./index-ysujwTdI.js";import{u as X,S as Y}from"./_layout-CWRW7eiL.js";const Z=z,ee=U,C=o.forwardRef(({className:s,...r},a)=>t.jsx(D,{ref:a,className:l("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r}));C.displayName=D.displayName;const O=o.forwardRef(({className:s,children:r,...a},c)=>t.jsxs(ee,{children:[t.jsx(C,{}),t.jsx(A,{ref:c,className:l("outline-none fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:r})]}));O.displayName=A.displayName;const $=({className:s,...r})=>t.jsx("div",{className:l("flex flex-col space-y-1.5 text-center sm:text-left",s),...r});$.displayName="DialogHeader";const L=o.forwardRef(({className:s,...r},a)=>t.jsx(H,{ref:a,className:l("text-lg font-semibold leading-none tracking-tight",s),...r}));L.displayName=H.displayName;const te=o.forwardRef(({className:s,...r},a)=>t.jsx(_,{ref:a,className:l("text-sm text-muted-foreground",s),...r}));te.displayName=_.displayName;const j=o.forwardRef(({className:s,...r},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:l("w-full caption-bottom text-sm",s),...r})}));j.displayName="Table";const ae=o.forwardRef(({className:s,...r},a)=>t.jsx("thead",{ref:a,className:l("[&_tr]:border-b",s),...r}));ae.displayName="TableHeader";const y=o.forwardRef(({className:s,...r},a)=>t.jsx("tbody",{ref:a,className:l("[&_tr:last-child]:border-0",s),...r}));y.displayName="TableBody";const se=o.forwardRef(({className:s,...r},a)=>t.jsx("tfoot",{ref:a,className:l("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r}));se.displayName="TableFooter";const T=o.forwardRef(({className:s,...r},a)=>t.jsx("tr",{ref:a,className:l("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r}));T.displayName="TableRow";const re=o.forwardRef(({className:s,...r},a)=>t.jsx("th",{ref:a,className:l("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));re.displayName="TableHead";const g=o.forwardRef(({className:s,...r},a)=>t.jsx("td",{ref:a,className:l("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));g.displayName="TableCell";const P=o.forwardRef(({className:s,...r},a)=>t.jsx("caption",{ref:a,className:l("mt-4 text-sm text-muted-foreground",s),...r}));P.displayName="TableCaption";const ne=W("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x({className:s,variant:r,...a}){return t.jsx("div",{className:l(ne({variant:r}),s),...a})}function oe(s,r,a){return r==="_Address"?`${s}/address/${a}`:r==="_TxHash"?`${s}/tx/${a}`:r==="_BlockNumber"?`${s}/block/${a}`:"#"}function E(s,r){const a={};for(let c=0;c<s.length;c++){const b=s[c],N=r[c];a[b]=N}return a}function de(){const s=G(),r=q(),{db:a}=M(X(e=>({db:e.db}))),c=s.table;if(o.useEffect(()=>{(!c||!a)&&r("/")},[c,a]),!c)return t.jsx(t.Fragment,{});if(!a)return t.jsx(t.Fragment,{});const b=a.exec(`SELECT * FROM ${c};`)[0],N=b.columns.map(e=>({field:e}));let R=[];for(const e of b.values){const n=E(b.columns,e);R.push(n)}const[f,I]=o.useState([]),S=()=>{const e=f.slice(0,f.length-1);I(e)},k=e=>{const n=[...f,e];I(n)},u=f.length>0?f[f.length-1]:null,h=(e,n,i)=>Array.isArray(e)?J(e,n,i):typeof e=="object"?B(e,n,i):`${e}`,J=(e,n,i)=>t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{children:["Array of ",e.length,":"]}),t.jsx("div",{className:"flex flex-row gap-1 flex-wrap",children:e.map(d=>typeof d=="string"||typeof d=="number"?v(d,n,i):t.jsx(x,{variant:"secondary",children:h(d,n,i)}))})]}),B=(e,n,i)=>t.jsx(j,{children:t.jsx(y,{children:Object.entries(e).map(([d,m])=>t.jsxs(T,{children:[t.jsx(g,{className:"text-nowrap font-medium",children:d}),t.jsx(g,{className:"break-all",children:h(m,n,i)})]},d))})}),F=e=>["iterationIdsJsonList"].includes(e)?"Iteration":["eventId"].includes(e)?"Event":["routePairsIdsJsonList"].includes(e)?"PairData":["tokenId","token1id","token2id"].includes(e)?"Token":["routesAIdsJsonList","routesBIdsJsonList","dependantRoutesIdsJsonList"].includes(e)?"Route":["networkId","greenNetwork","redNetwork","networkA","networkB"].includes(e)?"Network":["address","poolAddress"].includes(e)?"_Address":["txHash"].includes(e)?"_TxHash":["blockNumber"].includes(e)?"_BlockNumber":"Unknown",v=(e,n,i,d)=>{if(d==="receiveTime")return t.jsxs(x,{variant:"outline",children:[new Date(e).toUTCString()," | ",e]});if(n==="Unknown")return t.jsx(x,{variant:"outline",children:e});if(["Token","Route","Network","Event","PairData","Iteration"].includes(n))return t.jsx(x,{variant:"outline",className:"cursor-pointer bg-blue-300/10 hover:bg-blue-500/30",onClick:()=>{const m=n,p=a.exec(`SELECT * FROM ${m} WHERE id = "${e}"`)[0],w=E(p.columns,p.values[0]);k({table:m,item:w})},children:e});if(["_Address","_TxHash","_BlockNumber"].includes(n)){const m=i.networkId;if(m){const p=Q(m),w=oe(p,n,e);return t.jsx("a",{href:w,target:"_blank",children:t.jsx(x,{variant:"outline",className:"cursor-pointer bg-green-300/10 hover:bg-green-500/30",children:e})})}return t.jsx(x,{variant:"outline",className:"bg-gray-300/20",children:e})}return t.jsx(x,{variant:"outline",children:e})},V=(e,n,i)=>{const d=F(e);try{return e.endsWith("JsonList")||e.endsWith("Json")?h(JSON.parse(n),d,i):n===null||`${n}`.length===0?"":v(n,d,i,e)}catch{return n}};return t.jsx(Y,{children:t.jsxs("div",{className:"ag-theme-quartz min-h-[100vh] flex-1 rounded-xl bg-muted/50 md:min-h-min",children:[t.jsx(Z,{open:f.length>0,children:t.jsx(O,{className:"max-h-[80vh] overflow-y-scroll w-3/4 max-w-5xl",onInteractOutside:()=>S(),onEscapeKeyDown:()=>S(),children:t.jsxs($,{children:[t.jsxs(L,{className:"mb-2",children:["Viewing ",u==null?void 0:u.table," entry"]}),t.jsxs(j,{className:"w-full",children:[t.jsxs(P,{children:["End of ",u==null?void 0:u.table," entry"]}),t.jsx(y,{children:u&&Object.entries(u.item).map(([e,n])=>t.jsxs(T,{children:[t.jsx(g,{className:"font-medium",children:e}),t.jsx(g,{className:"break-all",children:V(e,n,u.item)})]},e))})]})]})})}),t.jsx(K,{columnDefs:N,rowData:R,pagination:!0,defaultColDef:{filter:!0,enableRowGroup:!0},rowGroupPanelShow:"always",alwaysShowHorizontalScroll:!0,paginationAutoPageSize:!0,rowClass:"cursor-pointer",onRowClicked:e=>{e.data&&k({table:c,item:e.data})}})]})})}export{de as default};
//# sourceMappingURL=_table_-CjjcW5Tj.js.map
