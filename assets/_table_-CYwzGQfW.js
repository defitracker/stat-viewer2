import{R as B,r as l,j as e,O as E,c as d,C as I,T as C,D,P as $,a as W,u as G,b as q,d as M,A as U}from"./index-DlN7TR9l.js";import{u as _,S as K}from"./_layout-BR--WYu4.js";const Q=B,X=$,k=l.forwardRef(({className:s,...r},a)=>e.jsx(E,{ref:a,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r}));k.displayName=E.displayName;const O=l.forwardRef(({className:s,children:r,...a},i)=>e.jsxs(X,{children:[e.jsx(k,{}),e.jsx(I,{ref:i,className:d("outline-none fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:r})]}));O.displayName=I.displayName;const A=({className:s,...r})=>e.jsx("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",s),...r});A.displayName="DialogHeader";const H=l.forwardRef(({className:s,...r},a)=>e.jsx(C,{ref:a,className:d("text-lg font-semibold leading-none tracking-tight",s),...r}));H.displayName=C.displayName;const Y=l.forwardRef(({className:s,...r},a)=>e.jsx(D,{ref:a,className:d("text-sm text-muted-foreground",s),...r}));Y.displayName=D.displayName;const h=l.forwardRef(({className:s,...r},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:d("w-full caption-bottom text-sm",s),...r})}));h.displayName="Table";const Z=l.forwardRef(({className:s,...r},a)=>e.jsx("thead",{ref:a,className:d("[&_tr]:border-b",s),...r}));Z.displayName="TableHeader";const w=l.forwardRef(({className:s,...r},a)=>e.jsx("tbody",{ref:a,className:d("[&_tr:last-child]:border-0",s),...r}));w.displayName="TableBody";const ee=l.forwardRef(({className:s,...r},a)=>e.jsx("tfoot",{ref:a,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r}));ee.displayName="TableFooter";const N=l.forwardRef(({className:s,...r},a)=>e.jsx("tr",{ref:a,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r}));N.displayName="TableRow";const te=l.forwardRef(({className:s,...r},a)=>e.jsx("th",{ref:a,className:d("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));te.displayName="TableHead";const x=l.forwardRef(({className:s,...r},a)=>e.jsx("td",{ref:a,className:d("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));x.displayName="TableCell";const L=l.forwardRef(({className:s,...r},a)=>e.jsx("caption",{ref:a,className:d("mt-4 text-sm text-muted-foreground",s),...r}));L.displayName="TableCaption";const ae=W("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g({className:s,variant:r,...a}){return e.jsx("div",{className:d(ae({variant:r}),s),...a})}function S(s,r){const a={};for(let i=0;i<s.length;i++){const f=s[i],p=r[i];a[f]=p}return a}function oe(){const s=G(),r=q(),{db:a}=M(_(t=>({db:t.db}))),i=s.table;if(l.useEffect(()=>{(!i||!a)&&r("/")},[i,a]),!i)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});const f=a.exec(`SELECT * FROM ${i};`)[0],p=f.columns.map(t=>({field:t}));let j=[];for(const t of f.values){const o=S(f.columns,t);j.push(o)}const[m,y]=l.useState([]),R=()=>{const t=m.slice(0,m.length-1);y(t)},T=t=>{const o=[...m,t];y(o)},c=m.length>0?m[m.length-1]:null,b=(t,o)=>Array.isArray(t)?V(t,o):typeof t=="object"?z(t,o):`${t}`,V=(t,o)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{children:["Array of ",t.length,":"]}),e.jsx("div",{className:"flex flex-row gap-1 flex-wrap",children:t.map(n=>typeof n=="string"||typeof n=="number"?v(n,o):e.jsx(g,{variant:"secondary",children:b(n,o)}))})]}),z=(t,o)=>e.jsx(h,{children:e.jsx(w,{children:Object.entries(t).map(([n,u])=>e.jsxs(N,{children:[e.jsx(x,{className:"text-nowrap font-medium",children:n}),e.jsx(x,{className:"break-all",children:b(u,o)})]},n))})}),F=t=>["eventId"].includes(t)?"Event":["tokenId"].includes(t)?"Token":["routesAIdsJsonList","routesBIdsJsonList","dependantRoutesIdsJsonList"].includes(t)?"Route":["networkId","greenNetwork","redNetwork","networkA","networkB"].includes(t)?"Network":"Unknown",v=(t,o)=>o==="Unknown"?e.jsx(g,{variant:"outline",children:t}):e.jsx(g,{variant:"outline",className:"cursor-pointer bg-blue-300/10 hover:bg-blue-500/30",onClick:()=>{const n=o,u=a.exec(`SELECT * FROM ${n} WHERE id = "${t}"`)[0],P=S(u.columns,u.values[0]);T({table:n,item:P})},children:t}),J=(t,o)=>{const n=F(t);try{return t.endsWith("JsonList")||t.endsWith("Json")?b(JSON.parse(o),n):o===null||`${o}`.length===0?"":v(o,n)}catch{return o}};return e.jsx(K,{children:e.jsxs("div",{className:"ag-theme-quartz min-h-[100vh] flex-1 rounded-xl bg-muted/50 md:min-h-min",children:[e.jsx(Q,{open:m.length>0,children:e.jsx(O,{className:"max-h-[80vh] overflow-y-scroll w-3/4 max-w-5xl",onInteractOutside:()=>R(),onEscapeKeyDown:()=>R(),children:e.jsxs(A,{children:[e.jsxs(H,{className:"mb-2",children:["Viewing ",c==null?void 0:c.table," entry"]}),e.jsxs(h,{className:"w-full",children:[e.jsxs(L,{children:["End of ",c==null?void 0:c.table," entry"]}),e.jsx(w,{children:c&&Object.entries(c.item).map(([t,o])=>e.jsxs(N,{children:[e.jsx(x,{className:"font-medium",children:t}),e.jsx(x,{className:"break-all",children:J(t,o)})]},t))})]})]})})}),e.jsx(U,{columnDefs:p,rowData:j,pagination:!0,defaultColDef:{filter:!0,enableRowGroup:!0},rowGroupPanelShow:"always",alwaysShowHorizontalScroll:!0,paginationAutoPageSize:!0,rowClass:"cursor-pointer",onRowClicked:t=>{t.data&&T({table:i,item:t.data})}})]})})}export{oe as default};
//# sourceMappingURL=_table_-CYwzGQfW.js.map
